<div class="container mt-4">

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Parent Management</h3>
    <button class="btn btn-success" (click)="openForm()">
      + Add Parent
    </button>
  </div>

  <!-- ðŸ”¹ Add Parent Form -->
  <div class="card shadow p-4 mb-4" *ngIf="showForm">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <h5>Add Parent</h5>
      <button class="btn btn-sm btn-outline-danger" (click)="closeForm()">âœ–</button>
    </div>

    <form [formGroup]="parentForm" (ngSubmit)="submit()">
      <div class="row">

        <div class="col-md-6 mb-3">
          <label>User ID</label>
          <input type="number" class="form-control" formControlName="userId">
        </div>

        <div class="col-md-6 mb-3">
          <label>Name</label>
          <input type="text" class="form-control" formControlName="name">
        </div>

        <div class="col-md-6 mb-3">
          <label>Email</label>
          <input type="email" class="form-control" formControlName="email">
        </div>

        <div class="col-md-6 mb-3">
          <label>Phone</label>
          <input type="text" class="form-control" formControlName="phone">
        </div>

        <div class="col-md-6 mb-3">
          <label>Address</label>
          <input type="text" class="form-control" formControlName="address">
        </div>

        <div class="col-md-6 mb-3">
          <label>Relationship</label>
          <select class="form-select" formControlName="relationship">
            <option value="">Select</option>
            <option *ngFor="let r of relationships" [value]="r">
              {{ r }}
            </option>
          </select>
        </div>

      </div>

      <button class="btn btn-primary w-100">Save Parent</button>

      <div class="alert alert-danger mt-2" *ngIf="errorMsg">
        {{ errorMsg }}
      </div>
    </form>
  </div>

  <!-- ðŸ”¹ Parent Table -->
  <div class="card shadow">
    <table class="table table-bordered table-striped mb-0">
      <thead class="table-dark">
        <tr>
          <th>Parent ID</th>
          <th>User ID</th>
          <th>Parent Name</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Relationship</th>
          <th>Address</th>
          <th>Action</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let p of parents">
          <td>{{ p.parentId }}</td>
          <td>{{ p.userId }}</td>
          <td>{{ p.name }}</td>
          <td>{{ p.email }}</td>
          <td>{{ p.phone }}</td>
          <td>{{ p.relationship }}</td>
          <td>{{ p.address }}</td>
          <td>
            <button
              class="btn btn-danger btn-sm"
              (click)="deleteParent(p.parentId)">
              Delete
            </button>
          </td>
        </tr>

        <tr *ngIf="parents.length === 0">
          <td colspan="8" class="text-center text-muted">
            No parents found
          </td>
        </tr>
      </tbody>
    </table>
  </div>

</div>
