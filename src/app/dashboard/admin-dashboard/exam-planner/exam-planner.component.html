<div class="exam-page">

  <!-- HEADER -->
  <div class="exam-header">
    <h4 class="page-title">
      <i class="bi bi-journal-text"></i> Exams
    </h4>

    <button class="btn btn-warning" (click)="openCreateForm()">
      <i class="bi bi-plus-circle"></i> Create Exam
    </button>
  </div>

  <!-- TABLE -->
  <div class="card exam-table">
    <table class="table table-hover">
      <thead class="table-header">
        <tr>
          <th>Exam</th>
          <th>Class</th>
          <th>Section</th>
          <th>Subject</th>
          <th>Teacher</th>
          <th>Type</th>
          <th>Marks</th>
          <th>Action</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let e of exams">
          <td>{{ e.examName }}</td>
          <td>{{ e.className }}</td>
          <td>{{ e.sectionName }}</td>
          <td>{{ e.subjectName }}</td>
          <td>{{ e.teacherName }}</td>
          <td>
            <span class="badge bg-info">{{ e.examType }}</span>
          </td>
          <td>{{ e.totalMarks }}</td>
          <td>
            <button class="btn btn-sm btn-outline-primary"
                    (click)="editExam(e)">
              ‚úèÔ∏è
            </button>
            <button class="btn btn-sm btn-outline-danger ms-1"
                    (click)="deleteExam(e.examId)">
              üóëÔ∏è
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

 <!-- OVERLAY FORM -->
<div class="form-overlay" *ngIf="showForm">

  <div class="exam-form card">

    <!-- FORM HEADER -->
    <div class="form-header">
      <h5>
        <i class="bi bi-clipboard-plus"></i>
        {{ isEdit ? 'Update Exam' : 'Create Exam' }}
      </h5>

      <button class="close-btn" (click)="closeForm()">‚úñ</button>
    </div>

    <!-- FORM -->
   <form [formGroup]="examForm" (ngSubmit)="submitExam()">

  <div class="row g-3">

    <!-- LEFT COLUMN -->
    <div class="col-md-6">

      <div class="mb-3">
        <label class="form-label">Exam Name</label>
        <input class="form-control"
               placeholder="Enter Exam Name"
               formControlName="examName">
      </div>

   <div class="row g-3">

  <!-- CLASS -->
  <div class="col-md-4">
    <label class="form-label">Class</label>
    <select class="form-select" formControlName="classId">
      <option value="">Select Class</option>
      <option *ngFor="let c of classes" [value]="c.classId">
        {{ c.className }}
      </option>
    </select>
  </div>

  <!-- SECTION -->
  <div class="col-md-4">
    <label class="form-label">Section</label>
    <select class="form-select" formControlName="sectionId">
      <option value="">Select Section</option>
      <option *ngFor="let s of sections" [value]="s.sectionId">
        {{ s.sectionName }}
      </option>
    </select>
  </div>

  <!-- SUBJECT -->
  <div class="col-md-4">
    <label class="form-label">Subject</label>
    <select class="form-select" formControlName="subjectId">
      <option value="">Select Subject</option>
      <option *ngFor="let sub of subjects" [value]="sub.subjectId">
        {{ sub.subjectName }}
      </option>
    </select>
  </div>

</div>


      <div class="mb-3">
        <label class="form-label">Teacher</label>
        <input class="form-control"
               placeholder="Enter Teacher ID"
               formControlName="teacherId">
      </div>

      <div class="mb-3">
        <label class="form-label">Term</label>
        <input class="form-control"
               placeholder="e.g. Mid Term / Final"
               formControlName="term">
      </div>

    </div>

    <!-- RIGHT COLUMN -->
    <div class="col-md-6">

      <div class="mb-3">
        <label class="form-label">Exam Type</label>
        <select class="form-select" formControlName="examType">
          <option value="">Select Exam Type</option>
          <option value="ONLINE">ONLINE</option>
          <option value="OFFLINE">OFFLINE</option>
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">Start Time</label>
        <input type="datetime-local"
               class="form-control"
               formControlName="startTime">
      </div>

      <div class="mb-3">
        <label class="form-label">End Time</label>
        <input type="datetime-local"
               class="form-control"
               formControlName="endTime">
      </div>

      <div class="mb-3">
        <label class="form-label">Duration (Minutes)</label>
        <input class="form-control"
               placeholder="Auto calculated"
               formControlName="duration"
               readonly>
      </div>

      <div class="mb-3">
        <label class="form-label">Total Marks</label>
        <input class="form-control"
               placeholder="Enter Total Marks"
               formControlName="totalMarks">
      </div>

    </div>
  </div>

  <!-- SAVE BUTTON -->
  <div class="text-center mt-4">
    <button type="submit"
            class="btn btn-warning px-5"
            [disabled]="examForm.invalid">
      {{ isEdit ? 'Update Exam' : 'Save Exam' }}
    </button>
  </div>

</form>


  </div>
</div>
